(function(t){function e(e){for(var s,r,o=e[0],l=e[1],c=e[2],u=0,d=[];u<o.length;u++)r=o[u],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&d.push(i[r][0]),i[r]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(t[s]=l[s]);m&&m(e);while(d.length)d.shift()();return n.push.apply(n,c||[]),a()}function a(){for(var t,e=0;e<n.length;e++){for(var a=n[e],s=!0,o=1;o<a.length;o++){var l=a[o];0!==i[l]&&(s=!1)}s&&(n.splice(e--,1),t=r(r.s=a[0]))}return t}var s={},i={app:0},n=[];function r(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=s,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)r.d(a,s,function(e){return t[e]}.bind(null,s));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var m=l;n.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"0070":function(t,e,a){"use strict";var s=a("2317"),i=a.n(s);i.a},"01d5":function(t,e,a){"use strict";var s=a("37c4"),i=a.n(s);i.a},"034f":function(t,e,a){"use strict";var s=a("85ec"),i=a.n(s);i.a},"12f0":function(t,e,a){t.exports=a.p+"img/console.63eb8715.png"},2317:function(t,e,a){},"37c4":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("d3b7"),a("e260"),a("e6cf"),a("cca6"),a("a79d");var s=a("2b0e"),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("Navbar"),a("div",{staticClass:"container"},[a("router-view")],1),a("vue-progress-bar")],1)},n=[],r=(a("4de4"),a("a630"),a("c975"),a("a434"),a("3ca3"),a("53ca")),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"d-flex flex-column flex-md-row align-items-center p-3 px-md-4 mb-5 bg-white border-bottom shadow-sm"},[a("h5",{staticClass:"my-0 mr-md-auto font-weight-normal"},[a("router-link",{attrs:{to:"/"}},[t._v("PULS ADMIN")])],1),a("nav",{staticClass:"my-2 my-md-0 mr-md-3"},[t.isLoggedIn&&t.isAdmin?a("span",[a("a",{staticClass:"dropdown-toggle p-2",attrs:{href:"#",role:"button",id:"dropdownAdminMenu","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[t._v(" Admin ")]),a("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"dropdownAdminMenu"}},[a("router-link",{staticClass:"dropdown-item p-2 text-dark",attrs:{to:"/terminals"}},[t._v("Terminaux")]),a("router-link",{staticClass:"dropdown-item p-2 text-dark",attrs:{to:"/campaigns"}},[t._v("Campagnes")]),a("router-link",{staticClass:"dropdown-item p-2 text-dark",attrs:{to:"/games"}},[t._v("Jeux")]),a("router-link",{staticClass:"dropdown-item p-2 text-dark",attrs:{to:"/customers"}},[t._v("Clients")])],1)]):t._e()]),t.isLoggedIn?a("a",{staticClass:"btn btn-outline-primary",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.logout(e)}}},[t._v("Déconnexion")]):a("router-link",{staticClass:"btn btn-outline-primary",attrs:{to:"/login"}},[a("font-awesome-icon",{attrs:{icon:"user-secret"}}),t._v(" Connexion ")],1)],1)},l=[],c={name:"Navbar",computed:{isLoggedIn:function(){return this.$store.getters.isLoggedIn},isAdmin:function(){return this.$store.getters.isAdmin},isSuperAdmin:function(){return this.$store.getters.isSuperAdmin},isTerminalOn:function(){return this.$store.state.currentTerminal.is_on}},methods:{logout:function(){this.$store.dispatch("logout"),this.$router.push("/login")}}},m=c,u=a("2877"),d=Object(u["a"])(m,o,l,!1,null,null,null),p=d.exports,v={name:"App",components:{Navbar:p},data:function(){return{gamepads:[],btnA:!1,btnB:!1,btnRight:!1,btnLeft:!1}},created:function(){window.addEventListener("gamepadconnected",this.gamepadConnectionHandler),window.addEventListener("gamepaddisconnected",this.gamepadDisconnectionHandler)},methods:{gamepadConnectionHandler:function(t){this.gamepads.push(t.gamepad),console.log("Gamepad Connected: "+t.gamepad.id),this.cycle()},gamepadDisconnectionHandler:function(t){this.gamepads.splice(this.gamepads.indexOf(t.gamepad),1),console.log("Gamepad Disconnected: "+t.gamepad.id),cancelAnimationFrame()},scanGamepads:function(){return navigator.getGamepads?Array.from(navigator.getGamepads()).filter((function(t){return null!==t})):navigator.webkitGetGamepads?Array.from(navigator.webkitGetGamepads()).filter((function(t){return null!==t})):[]},buttonPressed:function(t){return"object"==Object(r["a"])(t)?t.pressed:1==t},cycle:function(){this.gamepads=this.scanGamepads();var t=this.gamepads[0];this.buttonPressed(t.buttons[0])?this.$store.state.gamepad.A=!0:this.$store.state.gamepad.A=!1,this.buttonPressed(t.buttons[1])?this.$store.state.gamepad.B=!0:this.$store.state.gamepad.B=!1,this.buttonPressed(t.buttons[9])?this.$store.state.gamepad.Start=!0:this.$store.state.gamepad.Start=!1,1==t.axes[0]?this.$store.state.gamepad.Right=!0:this.$store.state.gamepad.Right=!1,-1==t.axes[0]?this.$store.state.gamepad.Left=!0:this.$store.state.gamepad.Left=!1,-1==t.axes[1]?this.$store.state.gamepad.Top=!0:this.$store.state.gamepad.Top=!1,1==t.axes[1]?this.$store.state.gamepad.Bottom=!0:this.$store.state.gamepad.Bottom=!1,requestAnimationFrame(this.cycle)}}},g=v,f=(a("034f"),Object(u["a"])(g,i,n,!1,null,null,null)),h=f.exports,C=(a("b0c0"),a("8c4f")),_=a("2f62"),b=a("bc3a"),x=a.n(b);s["a"].use(_["a"]);var y=new _["a"].Store({state:{status:"",errors:"",token:localStorage.getItem("token")||"",user_id:localStorage.getItem("user_id")||"",is_admin:"true"==localStorage.getItem("is_admin")||"",is_superadmin:"true"==localStorage.getItem("is_superadmin")||"",maxGames:3,maxCampaigns:3,currentDonator:"",newDonatorEmail:"",currentTerminal:"",currentCampaign:"",currentGame:"",session:{terminal:"",donator:"",start_global:null,end_global:null,start_time:null,end_time:null,position_asso:"",campaign:"",game:null},gamepad:{A:!1,B:!1,Right:!1,Left:!1,Top:!1,Bottom:!1,Start:!1}},mutations:{stopListening:function(t){t.gamepad.listening=!1},startListening:function(t){t.gamepad.listening=!0},toggleA:function(t,e){t.gamepad.A=e},toggleB:function(t,e){t.gamepad.B=e},toggleRight:function(t,e){t.gamepad.Right=e},toggleLeft:function(t,e){t.gamepad.Left=e},toggleTop:function(t,e){t.gamepad.Top=e},toggleBottom:function(t,e){t.gamepad.Bottom=e},toggleStart:function(t,e){t.gamepad.Start=e},auth_success:function(t,e){t.status="success",t.token=e.token,t.user_id=e.user_id,t.is_admin=e.is_admin,t.is_superadmin=e.is_superadmin},auth_error:function(t,e){t.status="error",t.errors=e.response},logout:function(t){t.status="",t.token="",t.user_id="",t.is_admin=!1,t.is_superadmin=!1},saveCurrentDonator:function(t,e){t.currentDonator=e,t.session.donator=e.id},saveCurrentTerminal:function(t,e){t.currentTerminal=e},startTerminal:function(t,e){t.currentTerminal=e.terminal},stopTerminal:function(t){t.currentTerminal="",t.currentCampaign=""},saveNewDonatorEmail:function(t,e){t.newDonatorEmail=e},deleteGamingStates:function(t){t.newDonatorEmail="",t.currentDonator="",t.currentPayment={},t.currentTerminal="",t.currentCampaign="",t.currentGame="",t.session={}},startSession:function(t){t.session.start_global=new Date},endSession:function(t){t.session.end_global=new Date},startGameSession:function(t){t.session.start_time=new Date},endGameSession:function(t){t.session.end_time=new Date},saveCampaignChoice:function(t,e){t.session.campaign=e.campaign.id,t.currentCampaign=e.campaign,t.session.terminal=t.currentTerminal.id,t.session.position_asso=e.indexOf},saveGameChoice:function(t,e){t.currentGame=e,t.session.game=e.id},setSessionId:function(t,e){t.session.id=e}},actions:{startSession:function(t){var e=this,a=t.commit;x.a.post("donator/",{}).then((function(t){a("saveCurrentDonator",t.data),x.a.post("session/",e.state.session).then((function(t){a("setSessionId",t.data.id)})).catch((function(t){console.log(t)}))}))},updateSession:function(){x.a.put("session/"+this.state.session.id+"/",this.state.session)},login:function(t,e){var a=t.commit;return new Promise((function(t,s){x.a.post("auth/",e).then((function(e){var s="Token "+e.data.token;localStorage.setItem("token",s),localStorage.setItem("user_id",e.data.user_id),localStorage.setItem("is_admin",e.data.is_admin),localStorage.setItem("is_superadmin",e.data.is_superadmin),x.a.defaults.headers.common["Authorization"]=s,a("auth_success",{token:s,user_id:e.data.user_id,is_admin:e.data.is_admin,is_superadmin:e.data.is_superadmin}),t(e)})).catch((function(t){console.log(t),a("auth_error",t),localStorage.removeItem("token"),s(t)}))}))},register:function(t,e){var a=t.commit;return new Promise((function(t,s){x.a.post("api/user/",e).then((function(e){console.log(e),t(e)})).catch((function(t){a("auth_error",t),localStorage.removeItem("token"),s(t)}))}))},logout:function(t){var e=this,a=t.commit;return new Promise((function(t){e.getters.isAdmin||x.a.get("terminal/mine/off/").then((function(e){t(e)})).catch((function(t){console.log(t.response)})),a("logout"),localStorage.removeItem("token"),localStorage.removeItem("user_id"),localStorage.removeItem("is_admin"),localStorage.removeItem("is_superadmin"),delete x.a.defaults.headers.common["Authorization"]}))}},getters:{isLoggedIn:function(t){return!!t.token},authStatus:function(t){return t.status},isAdmin:function(t){return t.is_admin},isSuperAdmin:function(t){return t.is_superadmin}},modules:{}}),w=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"home"},[t.isAdmin?a("div",[a("h1",{staticClass:"display-4 font-weight-bold"},[t._v("Bienvenue")]),a("p",{staticClass:"lead"},[t._v(" Vous avez désormais accès à la console d'administration. Que voulez-vous faire ? ")]),a("div",{staticClass:"d-flex align-items center"},[a("router-link",{staticClass:"btn btn-outline-primary mr-2",attrs:{to:"/terminals"}},[t._v(" Gestion des terminaux ")]),a("router-link",{staticClass:"btn btn-outline-primary mr-2",attrs:{to:"/campaigns"}},[t._v(" Gestion des campagnes ")]),a("router-link",{staticClass:"btn btn-outline-primary mr-2",attrs:{to:"/games"}},[t._v(" Gestion des jeux ")]),a("router-link",{staticClass:"btn btn-outline-primary mr-2",attrs:{to:"/customers"}},[t._v(" Gestion des clients ")])],1)]):t.isLoggedIn?a("div",[a("h1",{staticClass:"display-4 font-weight-bold"},[t._v("Bienvenue sur ce terminal")]),a("p",{staticClass:"lead"},[t._v(" Votre terminal est bien connecté à notre réseau. Que voulez-vous faire ? ")]),a("div",{staticClass:"d-flex align-items center"},[a("router-link",{staticClass:"btn btn-outline-primary mr-2",attrs:{to:"/start"}},[t._v(" Lancer la session ")]),a("a",{staticClass:"btn btn-outline-primary mr-2",attrs:{href:"mailto:hilali.moncef@gmail.com"}},[t._v(" Contacter le support ")])],1)]):a("div",[a("h1",{staticClass:"display-4 font-weight-bold"},[t._v("Bonjour !")]),a("p",{staticClass:"lead"},[t._v(" Pour commencer, veuillez vous connecter. ")]),a("div",{staticClass:"d-flex align-items center"},[a("router-link",{staticClass:"btn btn-outline-primary mr-2",attrs:{to:"/login"}},[t._v(" Se connecter ")])],1)])])},$=[],k={name:"home",data:function(){return{isAdmin:this.$store.getters.isAdmin,isLoggedIn:this.$store.getters.isLoggedIn}}},A=k,E=Object(u["a"])(A,w,$,!1,null,null,null),T=E.exports,j=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"about"},[t._m(0),a("div",{staticClass:"col-10 offset-1 mt-4"},[a("div",{staticClass:"row mb-3 d-flex justify-content-between"},[a("span"),a("router-link",{staticClass:"btn btn-primary",attrs:{to:"/campaign/add"}},[a("font-awesome-icon",{staticClass:"mr-2",attrs:{icon:"plus"}}),t._v("Ajouter une campagne")],1)],1),a("div",{staticClass:"row"},t._l(t.campaigns,(function(t){return a("Campaign",{key:t.id,attrs:{campaign:t}})})),1)])])},D=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-8 offset-2"},[a("div",{staticClass:"row"},[a("h1",{staticClass:"display-4 text-center"},[t._v("Gestion des campagnes")]),a("p",{staticClass:"lead"},[t._v(" Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. ")])])])}],L=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"campaign card w-100 mb-3"},[a("div",{staticClass:"card-body d-flex align-items-center justify-content-between"},[a("div",{staticClass:"clickable d-flex align-items-center",on:{click:t.showDetail}},[a("div",{staticClass:"mr-3"},[a("img",{attrs:{src:t.currentCampaign.logo,alt:t.currentCampaign.name,width:"110"}})]),a("div",{staticClass:"d-flex flex-column justify-content-between"},[a("h4",[t._v(t._s(t.currentCampaign.name))]),a("p",{staticClass:"small my-0"},[a("strong",[t._v("Objectif de collecte :")]),t._v(" "+t._s(t.currentCampaign.collected)+"/"+t._s(t.currentCampaign.goal_amount)+" € ")]),a("p",{staticClass:"small"},[a("strong",[t._v("Description :")]),t._v(" "+t._s(t.currentCampaign.description)+" ")])])]),a("div",{staticClass:"actions d-flex align-self-stretch small"},[a("a",{staticClass:"btn-rounded mr-2",attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.editCampaign(e)}}},[a("font-awesome-icon",{attrs:{icon:"pen"}})],1),a("a",{staticClass:"btn-rounded text-danger",attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.deleteCampaign(e)}}},[a("font-awesome-icon",{attrs:{icon:"times"}})],1)])])])},S=[],N={name:"Campaign",props:["campaign"],data:function(){return{currentCampaign:this.campaign}},mounted:function(){},methods:{showDetail:function(){this.$router.push({name:"campaign",params:{id:this.currentCampaign.id}})},editCampaign:function(){this.$router.push({name:"edit-campaign",params:{id:this.currentCampaign.id}})},deleteCampaign:function(){this.$router.push({name:"edit-campaign",params:{id:this.currentCampaign.id}})}}},P=N,G=(a("f77e"),Object(u["a"])(P,L,S,!1,null,null,null)),O=G.exports,q={name:"Campaigns",components:{Campaign:O},data:function(){return{campaigns:""}},mounted:function(){this.getCampaigns()},methods:{getCampaigns:function(){var t=this;this.$http.get("campaign/").then((function(e){t.campaigns=e.data})).catch((function(t){console.log(t)}))}}},H=q,I=Object(u["a"])(H,j,D,!1,null,null,null),M=I.exports,F=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"about mt-3"},[a("div",{staticClass:"row mb-4"},[t._m(0),a("div",{staticClass:"col text-right"},[a("router-link",{staticClass:"btn btn-link",attrs:{to:"/campaigns"}},[t._v(" Retour à la liste ")])],1)]),a("div",{staticClass:"col"},[a("div",{staticClass:"row mb-3"},[a("div",{staticClass:"card card-rounded bg-dark text-white w-100"},[a("div",{staticClass:"card-body d-flex"},[a("div",{staticClass:"mr-4"},[a("img",{attrs:{src:t.campaign.logo,alt:t.campaign.name,height:"150"}})]),a("div",{staticClass:"d-flex flex-column"},[a("span",{staticClass:"small mt-2 mb-0"},[t._v("Campagne n° "+t._s(t.campaign.id))]),a("h1",{staticClass:"display-4 text-white"},[t._v(t._s(t.campaign.name))]),a("p",{staticClass:"w-100"},[a("strong",[t._v("Description :")]),t._v(" "+t._s(t.campaign.description)+" ")])])])])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-4"},[a("div",{staticClass:"card card-rounded"},[a("div",{staticClass:"card-body"},[a("p",{staticClass:"lead"},[t._v("Montant récolté aujourd'hui")]),a("div",{staticClass:"display-4"},[t._v(t._s(t.totalToday)+" €")])])])]),a("div",{staticClass:"col-4"},[a("div",{staticClass:"card card-rounded"},[a("div",{staticClass:"card-body"},[a("p",{staticClass:"lead"},[t._v("Montant total récolté")]),a("div",{staticClass:"display-4"},[t._v(" "+t._s(t.campaign.collected)+"/"+t._s(t.campaign.goal_amount)+" € ")])])])]),a("div",{staticClass:"col-4"},[a("div",{staticClass:"card card-rounded"},[a("div",{staticClass:"card-body"},[a("p",{staticClass:"lead"},[t._v("Montant moyen")]),a("div",{staticClass:"display-4"},[t._v(t._s(t.avgDonation)+" €")])])])])]),a("div",{staticClass:"row my-3"},[a("div",{staticClass:"col-8"},[a("div",{staticClass:"card card-rounded"},[a("div",{staticClass:"card-body"},[a("h3",{staticClass:"my-3"},[t._v("Derniers donateurs")]),a("p",{staticClass:"lead "},[t._v("Les 5 derniers donateurs pour cette campagne.")]),a("table",{staticClass:"table"},[t._m(1),a("tbody",t._l(t.lastDonations,(function(e){return a("tr",{key:e.id},[a("th",{attrs:{scope:"row"}},[t._v(t._s(e.id))]),a("td",[t._v(t._s(e.amount)+" €")]),a("td",[a("router-link",{attrs:{to:"/terminal/"+e.terminal.id+"/"}},[t._v(" "+t._s(e.terminal.name))])],1),a("td",[t._v(t._s(e.game.name))])])})),0)])])])]),a("div",{staticClass:"col-4"},[a("div",{staticClass:"card card-rounded"},[a("div",{staticClass:"card-body"},[a("h3",{staticClass:"my-3"},[t._v("Vidéo")]),a("video",{staticClass:"w-100",attrs:{src:t.campaign.video_url,controls:""}})])])])])])},R=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col"},[a("h4",{staticClass:"font-weight-bold"},[t._v("Dashboard")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",{staticClass:"thead-dark"},[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("#")]),a("th",{attrs:{scope:"col"}},[t._v("Don")]),a("th",{attrs:{scope:"col"}},[t._v("Terminal")]),a("th",{attrs:{scope:"col"}},[t._v("Jeu")])])])}],B=(a("b680"),{name:"Campaign",data:function(){return{campaign:"",totalToday:"",totalEver:"",avgDonation:"",lastDonations:{}}},mounted:function(){this.getCampaign()},methods:{getCampaign:function(){var t=this;this.$http.get("campaign/"+this.$route.params.id+"/").then((function(e){t.campaign=e.data,t.getStats()})).catch((function(t){console.log(t.response)}))},getStats:function(){var t=this;this.$http.get("campaign/"+this.$route.params.id+"/stats/").then((function(e){var a=JSON.parse(e.data);t.totalToday=a.total_today,t.totalEver=a.total_ever,t.avgDonation=a.avg_amount.toFixed(2),t.lastDonations=a.last_donations})).catch((function(t){console.log(t.response)}))}}}),z=B,J=Object(u["a"])(z,F,R,!1,null,null,null),U=J.exports,V=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"about mt-3"},[a("div",{staticClass:"col-8 offset-2 mb-4"},[a("div",{staticClass:"row"},[a("h1",{staticClass:"display-4 text-center"},[t._v("Campagne n° "+t._s(t.campaign.id))]),a("p",{staticClass:"lead"},[t._v(" Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. ")])])]),a("div",{staticClass:"col-10 offset-1"},[a("EditSingleCampaign",{attrs:{campaign:t.campaign}})],1)])},W=[],Q=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{staticClass:"w-100"},[a("form",{staticClass:"row card card-rounded mb-5 d-flex align-items-stretch",attrs:{enctype:"multipart/form-data"}},[a("div",{staticClass:"card-body"},[a("h4",[t._v("Médias")]),a("div",{staticClass:"d-flex"},[a("div",{staticClass:"col-4 offset-4"},[a("div",{staticClass:"form-group h-100 d-flex flex-column"},[a("div",{staticClass:"mb-1 flex-grow-1 d-flex align-items-center justify-content-center"},[a("img",{staticClass:"mb-3",attrs:{src:t.campaign.logo,width:"150",alt:t.campaign.name}})]),a("input",{ref:"logo",staticClass:"form-control-file",attrs:{type:"file","aria-describedby":"fileHelpId",name:"logo"}}),a("small",{staticClass:"form-text text-muted",attrs:{id:"fileHelpId"}},[t._v("Logo en PNG décrivant bien la mission de l'association.")]),a("div",{staticClass:"mt-3 text-center"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.editLogo(e)}}},[t._v(" Enregistrer ")])])])])])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-9"},[a("div",{staticClass:"form-group w-100"},[a("label",{attrs:{for:"name"}},[t._v("Nom de la campagne")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.campaign.name,expression:"campaign.name"}],staticClass:"form-control",attrs:{type:"text","aria-describedby":"nameHelp"},domProps:{value:t.campaign.name},on:{input:function(e){e.target.composing||t.$set(t.campaign,"name",e.target.value)}}}),a("small",{staticClass:"form-text text-muted",attrs:{id:"nameHelp"}},[t._v("Donnez un nom cohérent à la campagne.")])])]),a("div",{staticClass:"col-3"},[a("div",{staticClass:"form-group w-100"},[a("label",{attrs:{for:"name"}},[t._v("Objectif de collecte")]),a("div",{staticClass:"input-group mb-3"},[a("div",{staticClass:"input-group-prepend"},[a("span",{staticClass:"input-group-text",attrs:{id:"basic-addon1"}},[a("font-awesome-icon",{attrs:{icon:"euro-sign"}})],1)]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.campaign.goal_amount,expression:"campaign.goal_amount"}],staticClass:"form-control",attrs:{type:"number"},domProps:{value:t.campaign.goal_amount},on:{input:function(e){e.target.composing||t.$set(t.campaign,"goal_amount",e.target.value)}}})])])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("div",{staticClass:"form-group w-100"},[a("label",{attrs:{for:"name"}},[t._v("Lien vers l'association")]),a("div",{staticClass:"input-group mb-3"},[a("div",{staticClass:"input-group-prepend"},[a("span",{staticClass:"input-group-text",attrs:{id:"basic-addon1"}},[a("font-awesome-icon",{attrs:{icon:"link"}})],1)]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.campaign.link,expression:"campaign.link"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.campaign.link},on:{input:function(e){e.target.composing||t.$set(t.campaign,"link",e.target.value)}}})])])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"form-group w-100"},[a("label",{attrs:{for:"description"}},[t._v("Description")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.campaign.description,expression:"campaign.description"}],staticClass:"form-control",attrs:{"aria-describedby":"descHelp"},domProps:{value:t.campaign.description},on:{input:function(e){e.target.composing||t.$set(t.campaign,"description",e.target.value)}}}),a("small",{staticClass:"form-text text-muted",attrs:{id:"descHelp"}},[t._v("Une courte description de la mission de l'association.")])])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("div",{staticClass:"form-group w-100"},[a("label",{attrs:{for:"name"}},[t._v("Lien vers la vidéo")]),a("div",{staticClass:"input-group mb-3"},[a("div",{staticClass:"input-group-prepend"},[a("span",{staticClass:"input-group-text",attrs:{id:"basic-addon1"}},[a("font-awesome-icon",{attrs:{icon:"video"}})],1)]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.campaign.video,expression:"campaign.video"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.campaign.video},on:{input:function(e){e.target.composing||t.$set(t.campaign,"video",e.target.value)}}})])])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("div",{staticClass:"form-group w-100"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"html_template"}},[t._v("HTML Template")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.campaign.html_template,expression:"campaign.html_template"}],staticClass:"form-control",domProps:{value:t.campaign.html_template},on:{input:function(e){e.target.composing||t.$set(t.campaign,"html_template",e.target.value)}}}),a("small",{staticClass:"form-text text-muted",attrs:{id:"htmlHelp"}},[t._v("Template HTML qui apparaît à la fin de chaque partie.")])])])])]),a("div",{staticClass:"row my-3"},[a("div",{staticClass:"col text-center"},[a("router-link",{staticClass:"btn btn-link",attrs:{to:"/campaigns"}},[t._v("Retour")]),a("button",{staticClass:"btn btn-primary",on:{click:function(e){return e.preventDefault(),t.edit(e)}}},[t._v(" Enregistrer les modifications ")])],1)])])},K=[],X=(a("a4d3"),a("e01a"),a("9911"),{name:"EditCampaignForm",props:["campaign"],data:function(){return{}},methods:{editLogo:function(){var t=this,e=new FormData;e.append("logo",this.$refs.logo.files[0]),this.$http.patch("campaign/"+this.campaign.id+"/",e,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){t.campaign=e.data})).catch((function(t){console.log(t.response)}))},edit:function(){var t=this;if(this.campaign){var e=new FormData;e.append("author",this.$store.state.user_id),e.append("name",this.campaign.name),e.append("goal_amount",this.campaign.goal_amount),e.append("link",this.campaign.link),e.append("description",this.campaign.description),e.append("video",this.campaign.video),e.append("html_template",this.campaign.html_template),this.$http.patch("campaign/"+this.campaign.id+"/",e).then((function(e){t.campaign=e.data})).catch((function(t){console.log(t.response)}))}}}}),Y=X,Z=Object(u["a"])(Y,Q,K,!1,null,null,null),tt=Z.exports,et={name:"EditCampaign",components:{EditSingleCampaign:tt},data:function(){return{campaign:{}}},mounted:function(){this.getCampaign()},methods:{getCampaign:function(){var t=this;this.$http.get("campaign/"+this.$route.params.id+"/").then((function(e){t.campaign=e.data})).catch((function(t){console.log(t.response)}))}}},at=et,st=Object(u["a"])(at,V,W,!1,null,null,null),it=st.exports,nt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"about mt-3"},[t._m(0),a("div",{staticClass:"col-8 offset-2"},[a("AddSingleCampaign")],1)])},rt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-8 offset-2 mb-4"},[a("div",{staticClass:"row"},[a("h1",{staticClass:"display-4 text-center"},[t._v("Ajouter une campagne")]),a("p",{staticClass:"lead"},[t._v(" Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. ")])])])}],ot=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{staticClass:"w-100"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-9"},[a("div",{staticClass:"form-group w-100"},[a("label",{attrs:{for:"name"}},[t._v("Nom de la campagne")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.campaign.name,expression:"campaign.name"}],staticClass:"form-control",attrs:{type:"text","aria-describedby":"nameHelp"},domProps:{value:t.campaign.name},on:{input:function(e){e.target.composing||t.$set(t.campaign,"name",e.target.value)}}}),a("small",{staticClass:"form-text text-muted",attrs:{id:"nameHelp"}},[t._v("Donnez un nom cohérent à la campagne.")])])]),a("div",{staticClass:"col-3"},[a("div",{staticClass:"form-group w-100"},[a("label",{attrs:{for:"name"}},[t._v("Objectif de collecte")]),a("div",{staticClass:"input-group mb-3"},[a("div",{staticClass:"input-group-prepend"},[a("span",{staticClass:"input-group-text",attrs:{id:"basic-addon1"}},[a("font-awesome-icon",{attrs:{icon:"euro-sign"}})],1)]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.campaign.goal_amount,expression:"campaign.goal_amount"}],staticClass:"form-control",attrs:{type:"number"},domProps:{value:t.campaign.goal_amount},on:{input:function(e){e.target.composing||t.$set(t.campaign,"goal_amount",e.target.value)}}})])])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("div",{staticClass:"form-group w-100"},[a("label",{attrs:{for:"name"}},[t._v("Lien vers l'association")]),a("div",{staticClass:"input-group mb-3"},[a("div",{staticClass:"input-group-prepend"},[a("span",{staticClass:"input-group-text",attrs:{id:"basic-addon1"}},[a("font-awesome-icon",{attrs:{icon:"link"}})],1)]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.campaign.link,expression:"campaign.link"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.campaign.link},on:{input:function(e){e.target.composing||t.$set(t.campaign,"link",e.target.value)}}})])])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"form-group w-100"},[a("label",{attrs:{for:"description"}},[t._v("Description")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.campaign.description,expression:"campaign.description"}],staticClass:"form-control",attrs:{"aria-describedby":"descHelp"},domProps:{value:t.campaign.description},on:{input:function(e){e.target.composing||t.$set(t.campaign,"description",e.target.value)}}}),a("small",{staticClass:"form-text text-muted",attrs:{id:"descHelp"}},[t._v("Une courte description de la mission de l'association.")])])])]),a("form",{staticClass:"row",attrs:{enctype:"multipart/form-data"}},[a("div",{staticClass:"col"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"logo"}},[t._v("Logo")]),a("input",{ref:"logo",staticClass:"form-control-file",attrs:{type:"file","aria-describedby":"fileHelpId",name:"logo"}}),a("small",{staticClass:"form-text text-muted",attrs:{id:"fileHelpId"}},[t._v("Logo en PNG décrivant bien la mission de l'association.")])])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("div",{staticClass:"form-group w-100"},[a("label",{attrs:{for:"name"}},[t._v("Lien vers la vidéo")]),a("div",{staticClass:"input-group mb-3"},[a("div",{staticClass:"input-group-prepend"},[a("span",{staticClass:"input-group-text",attrs:{id:"basic-addon1"}},[a("font-awesome-icon",{attrs:{icon:"video"}})],1)]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.campaign.video,expression:"campaign.video"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.campaign.video},on:{input:function(e){e.target.composing||t.$set(t.campaign,"video",e.target.value)}}})])])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("div",{staticClass:"form-group w-100"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"html_template"}},[t._v("HTML Template")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.campaign.html_template,expression:"campaign.html_template"}],staticClass:"form-control",domProps:{value:t.campaign.html_template},on:{input:function(e){e.target.composing||t.$set(t.campaign,"html_template",e.target.value)}}}),a("small",{staticClass:"form-text text-muted",attrs:{id:"htmlHelp"}},[t._v("Template HTML qui apparaît à la fin de chaque partie.")])])])])]),a("div",{staticClass:"row my-3"},[a("div",{staticClass:"col text-center"},[a("router-link",{staticClass:"btn btn-link",attrs:{to:"/campaigns"}},[t._v("Retour")]),a("button",{staticClass:"btn btn-primary",on:{click:function(e){return e.preventDefault(),t.add(e)}}},[t._v(" Enregistrer les modifications ")])],1)])])},lt=[],ct={name:"AddCampaignForm",data:function(){return{campaign:{}}},methods:{add:function(){var t=this;if(this.campaign){var e=new FormData;e.append("author",this.$store.state.user_id),e.append("name",this.campaign.name),e.append("goal_amount",this.campaign.goal_amount),e.append("link",this.campaign.link),e.append("description",this.campaign.description),e.append("html_template",this.campaign.html_template),e.append("video",this.campaign.video),e.append("logo",this.$refs.logo.files[0]),this.$http.post("campaign/",e,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){t.campaign=e.data,t.$router.push("/campaigns")})).catch((function(t){console.log(t.response)}))}}}},mt=ct,ut=Object(u["a"])(mt,ot,lt,!1,null,null,null),dt=ut.exports,pt={name:"AddCampaign",components:{AddSingleCampaign:dt}},vt=pt,gt=Object(u["a"])(vt,nt,rt,!1,null,null,null),ft=gt.exports,ht=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"about"},[t._m(0),a("div",{staticClass:"col-8 offset-2 mt-4"},[a("div",{staticClass:"row mb-3 d-flex justify-content-end"},[a("router-link",{staticClass:"btn btn-primary d-flex align-items-center",attrs:{to:"/customer/add"}},[a("font-awesome-icon",{staticClass:"mr-2",attrs:{icon:"plus"}}),a("span",[t._v("Nouveau client")])],1)],1),t._l(t.customers,(function(e){return a("div",{key:e.id,staticClass:"row mb-3"},[a("div",{staticClass:"terminal card w-100"},[a("div",{staticClass:"terminal d-flex align-items-center justify-content-between"},[a("div",{staticClass:"clickable py-2 px-3 d-flex flex-column"},[a("h3",{staticClass:"d-block mb-0"},[t._v(t._s(e.company))]),a("p",{staticClass:"mt-0 mb-2 small"},[a("strong",[t._v("Contact:")]),t._v(" "+t._s(e.representative)+" ")]),a("p",[e.is_active?a("span",{staticClass:"badge badge-success mr-2"},[t._v("Activé")]):a("span",{staticClass:"badge badge-danger mr-2"},[t._v("Désactivé")])])]),a("div",{staticClass:"links d-flex flex-column align-items-stretch bg-light align-self-stretch justify-content-around border-left"},[e.is_active?a("a",{staticClass:"text-danger px-3",attrs:{href:""},on:{click:function(a){return a.preventDefault(),t.deactivateClient(e.id)}}},[t._v("Désactiver le client")]):a("a",{staticClass:"text-danger px-3",attrs:{href:""},on:{click:function(a){return a.preventDefault(),t.activateClient(e.id)}}},[t._v("Activer le client")]),a("a",{staticClass:"px-3",attrs:{href:""},on:{click:function(a){return a.preventDefault(),t.editClient(e.id)}}},[t._v("Modifier le client")])])])])])}))],2)])},Ct=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-6 offset-3"},[a("div",{staticClass:"row"},[a("h1",{staticClass:"display-4 text-center"},[t._v("Gestion de clients")]),a("p",{staticClass:"lead"},[t._v(" Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. ")])])])}],_t={name:"Customers",data:function(){return{customers:""}},mounted:function(){this.getCustomers()},methods:{getCustomers:function(){var t=this;this.$http.get("customer/").then((function(e){t.customers=e.data}))},deactivateClient:function(t){var e=this;this.$http.get("customer/"+t+"/deactivate/").then((function(t){t&&e.getCustomers()}))},activateClient:function(t){var e=this;this.$http.get("customer/"+t+"/activate/").then((function(t){t&&e.getCustomers()}))},editClient:function(t){this.$router.push("/customer/"+t+"/edit")}}},bt=_t,xt=Object(u["a"])(bt,ht,Ct,!1,null,null,null),yt=xt.exports,wt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"about mt-3"},[t._m(0),a("div",{staticClass:"col-8 offset-2"},[a("AddSingleCustomer",{attrs:{customer:t.customer}})],1)])},$t=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-8 offset-2 mb-4"},[a("div",{staticClass:"row"},[a("h1",{staticClass:"display-4 text-center"},[t._v("Ajouter un client")]),a("p",{staticClass:"lead"},[t._v(" Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. ")])])])}],kt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{staticClass:"w-100"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"row"},[a("div",{staticClass:"form-group w-100"},[a("label",{attrs:{for:"name"}},[t._v("Nom de l'entreprise")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.customer.company,expression:"customer.company"}],staticClass:"form-control",attrs:{type:"text","aria-describedby":"nameHelp"},domProps:{value:t.customer.company},on:{input:function(e){e.target.composing||t.$set(t.customer,"company",e.target.value)}}}),a("small",{staticClass:"form-text text-muted",attrs:{id:"nameHelp"}},[t._v("Le nom de l'entreprise cliente.")])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"form-group w-100"},[a("label",{attrs:{for:"name"}},[t._v("Contact au sein de l'entreprise")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.customer.representative,expression:"customer.representative"}],staticClass:"form-control",attrs:{type:"text","aria-describedby":"nameHelp"},domProps:{value:t.customer.representative},on:{input:function(e){e.target.composing||t.$set(t.customer,"representative",e.target.value)}}}),a("small",{staticClass:"form-text text-muted",attrs:{id:"nameHelp"}},[t._v("Le nom ou l'email de votre contact dans cette entreprise.")])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-6 pl-0"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"sales_type"}},[t._v("Type de vente")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.customer.sales_type,expression:"customer.sales_type"}],staticClass:"form-control",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.customer,"sales_type",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"A"}},[t._v("Achat")]),a("option",{attrs:{value:"L"}},[t._v("Location")])])])]),a("div",{staticClass:"col-6 pr-0"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"sales_type"}},[t._v("Contrat de maintenance")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.customer.maintenance_type,expression:"customer.maintenance_type"}],staticClass:"form-control",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.customer,"maintenance_type",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"option1"}},[t._v("Option 1")]),a("option",{attrs:{value:"option2"}},[t._v("Option 2")])])])])])])]),a("div",{staticClass:"row mt-3"},[a("div",{staticClass:"col text-center"},[a("router-link",{staticClass:"btn btn-link",attrs:{to:"/customers"}},[t._v("Retour")]),a("button",{staticClass:"btn btn-primary",on:{click:function(e){return e.preventDefault(),t.add(e)}}},[t._v(" Enregistrer les modifications ")])],1)])])},At=[],Et={name:"AddCustomerForm",data:function(){return{customer:{}}},methods:{add:function(){var t=this;this.customer&&this.$http.post("customer/",this.customer).then((function(e){t.customer=e.data,t.$router.push("/customers")}))}}},Tt=Et,jt=Object(u["a"])(Tt,kt,At,!1,null,null,null),Dt=jt.exports,Lt={name:"AddCustomer",components:{AddSingleCustomer:Dt}},St=Lt,Nt=Object(u["a"])(St,wt,$t,!1,null,null,null),Pt=Nt.exports,Gt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"about mt-3"},[a("div",{staticClass:"col-8 offset-2 mb-4"},[a("div",{staticClass:"row"},[a("h1",{staticClass:"display-4 text-center"},[t._v("Customer n° "+t._s(t.customer.id))]),a("p",{staticClass:"lead"},[t._v(" Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. ")])])]),a("div",{staticClass:"col-8 offset-2"},[a("EditSingleCustomer",{attrs:{customer:t.customer}})],1)])},Ot=[],qt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{staticClass:"w-100"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"row"},[a("div",{staticClass:"form-group w-100"},[a("label",{attrs:{for:"name"}},[t._v("Nom de l'entreprise")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.customer.company,expression:"customer.company"}],staticClass:"form-control",attrs:{type:"text","aria-describedby":"nameHelp"},domProps:{value:t.customer.company},on:{input:function(e){e.target.composing||t.$set(t.customer,"company",e.target.value)}}}),a("small",{staticClass:"form-text text-muted",attrs:{id:"nameHelp"}},[t._v("Le nom de l'entreprise cliente.")])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"form-group w-100"},[a("label",{attrs:{for:"name"}},[t._v("Contact au sein de l'entreprise")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.customer.representative,expression:"customer.representative"}],staticClass:"form-control",attrs:{type:"text","aria-describedby":"nameHelp"},domProps:{value:t.customer.representative},on:{input:function(e){e.target.composing||t.$set(t.customer,"representative",e.target.value)}}}),a("small",{staticClass:"form-text text-muted",attrs:{id:"nameHelp"}},[t._v("Le nom ou l'email de votre contact dans cette entreprise.")])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-6 pl-0"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"sales_type"}},[t._v("Type de vente")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.customer.sales_type,expression:"customer.sales_type"}],staticClass:"form-control",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.customer,"sales_type",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"A",checked:"A"==t.customer.sales_type}},[t._v("Achat")]),a("option",{attrs:{value:"L",checked:"L"==t.customer.sales_type}},[t._v("Location")])])])]),a("div",{staticClass:"col-6 pr-0"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"sales_type"}},[t._v("Contrat de maintenance")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.customer.maintenance_type,expression:"customer.maintenance_type"}],staticClass:"form-control",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.customer,"maintenance_type",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"option1",checked:"option1"==t.customer.sales_type}},[t._v("Option 1")]),a("option",{attrs:{value:"option2",checked:"option2"==t.customer.sales_type}},[t._v("Option 2")])])])])])])]),a("div",{staticClass:"row mt-3"},[a("div",{staticClass:"col text-center"},[a("router-link",{staticClass:"btn btn-link",attrs:{to:"/customers"}},[t._v("Retour")]),a("button",{staticClass:"btn btn-primary",on:{click:function(e){return e.preventDefault(),t.edit(e)}}},[t._v(" Enregistrer les modifications ")])],1)])])},Ht=[],It={name:"EditCustomerForm",props:["customer"],methods:{edit:function(){var t=this;this.customer&&this.$http.put("customer/"+this.customer.id+"/",this.customer).then((function(e){t.customer=e.data})).catch()}}},Mt=It,Ft=Object(u["a"])(Mt,qt,Ht,!1,null,null,null),Rt=Ft.exports,Bt={name:"EditCustomer",components:{EditSingleCustomer:Rt},data:function(){return{customer:{}}},mounted:function(){this.getCustomer()},methods:{getCustomer:function(){var t=this;this.$http.get("customer/"+this.$route.params.id+"/").then((function(e){t.customer=e.data})).catch((function(e){404==e.response.status&&t.$router.push("/customers")}))}}},zt=Bt,Jt=Object(u["a"])(zt,Gt,Ot,!1,null,null,null),Ut=Jt.exports,Vt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"about"},[t._m(0),a("div",{staticClass:"col-10 offset-1 mt-4"},[a("div",{staticClass:"row mb-3 d-flex justify-content-end"},[a("router-link",{staticClass:"btn btn-primary d-flex align-items-center",attrs:{to:"/terminal/add"}},[a("font-awesome-icon",{staticClass:"mr-2",attrs:{icon:"plus"}}),a("span",[t._v("Nouveau terminal")])],1)],1),a("div",{staticClass:"row"},t._l(t.terminals,(function(t){return a("Terminal",{key:t.id,staticClass:"mb-3",attrs:{terminal:t}})})),1)])])},Wt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-6 offset-3"},[a("div",{staticClass:"row"},[a("h1",{staticClass:"display-4 text-center"},[t._v("Gestion de terminaux")]),a("p",{staticClass:"lead"},[t._v(" Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. ")])])])}],Qt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"terminal card w-100"},[s("div",{staticClass:"terminal d-flex align-items-center justify-content-between"},[s("div",{staticClass:"clickable py-2 px-3 d-flex align-items-center w-100",on:{click:t.showDetail}},[s("img",{staticClass:"mx-3",attrs:{src:a("12f0"),height:"70",alt:"Console"}}),s("div",{staticClass:"d-flex flex-column justify-content-between"},[s("strong",[t._v(t._s(t.currentTerminal.name))]),s("p",{staticClass:"small my-1"},[t._v(" Campagne: "),t._l(t.campaigns,(function(e){return s("span",{key:e.id,staticClass:"border px-2 mx-1 rounded border-primary text-primary"},[t._v(t._s(e.name))])}))],2),s("p",{staticClass:"small my-1"},[t._v(" Jeux: "),t._l(t.games,(function(e){return s("span",{key:e.id,staticClass:"border px-2 mx-1 rounded border-secondary text-secondary"},[t._v(t._s(e.name))])}))],2)]),s("div",{staticClass:"d-flex flex-column ml-auto"},[t.currentTerminal.is_active?s("span",{staticClass:"badge badge-success my-1"},[t._v("Activé")]):s("span",{staticClass:"badge badge-danger my-1"},[t._v("Inactive")]),t.currentTerminal.is_on?s("span",{staticClass:"badge badge-success my-1"},[t._v("Allumé")]):s("span",{staticClass:"badge badge-danger my-1"},[t._v("Eteint")]),t.currentTerminal.is_playing?s("span",{staticClass:"badge badge-success my-1"},[t._v("En jeu")]):s("span",{staticClass:"badge badge-warning my-1"},[t._v("En attente")])])]),s("div",{staticClass:"links d-flex flex-column align-items-stretch bg-light align-self-stretch justify-content-around border-left"},[t.currentTerminal.is_active?s("a",{staticClass:"text-danger px-3",attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.deactivateTerminal(e)}}},[t._v("Désactiver")]):s("a",{staticClass:"text-success px-3",attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.activateTerminal(e)}}},[t._v("Activer")]),s("a",{staticClass:"px-3",attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.editTerminal(e)}}},[t._v("Modifier")])])])])},Kt=[],Xt={name:"Terminals",props:["terminal"],data:function(){return{currentTerminal:this.terminal,campaigns:{},games:{}}},mounted:function(){var t=this;this.currentTerminal.campaigns&&this.currentTerminal.games?(this.$http.get("terminal/"+this.currentTerminal.id+"/campaigns/").then((function(e){t.campaigns=e.data})),this.$http.get("terminal/"+this.currentTerminal.id+"/games/").then((function(e){t.games=e.data}))):this.campaigns=["Non assigné"]},methods:{showDetail:function(){this.$router.push({name:"terminal",params:{id:this.currentTerminal.id}})},editTerminal:function(){this.$router.push({name:"edit-terminal",params:{id:this.currentTerminal.id}})},activateTerminal:function(){var t=this;this.currentTerminal.campaigns&&this.currentTerminal.games?this.$http.get("terminal/"+this.currentTerminal.id+"/activate/").then((function(e){t.currentTerminal=e.data})):console.error("Impossible d'activer un terminal sans campagne ou sans jeu.")},deactivateTerminal:function(){var t=this;this.$http.get("terminal/"+this.currentTerminal.id+"/deactivate/").then((function(e){t.currentTerminal=e.data}))}}},Yt=Xt,Zt=(a("0070"),Object(u["a"])(Yt,Qt,Kt,!1,null,null,null)),te=Zt.exports,ee={name:"Terminals",components:{Terminal:te},data:function(){return{terminals:""}},mounted:function(){this.getTerminals()},methods:{getTerminals:function(){var t=this;this.$http.get("terminal/").then((function(e){t.terminals=e.data}))}}},ae=ee,se=Object(u["a"])(ae,Vt,Wt,!1,null,null,null),ie=se.exports,ne=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mt-2"},[a("div",{staticClass:"row mb-4"},[t._m(0),a("div",{staticClass:"col text-right"},[a("router-link",{staticClass:"btn btn-link",attrs:{to:"/terminals"}},[t._v(" Retour à la liste ")])],1)]),a("div",{staticClass:"row"},[a("div",{staticClass:"col mb-3"},[a("div",{staticClass:"px-4 py-2 card card-rounded bg-dark"},[a("h1",{staticClass:"display-4",staticStyle:{color:"#fff"}},[t._v(" #"+t._s(t.terminal.id)+" "+t._s(t.terminal.name)+" ")]),a("p",{staticClass:"lead w-100"},[t.terminal.is_active?a("span",{staticClass:"badge badge-success mr-2"},[t._v("Activé")]):a("span",{staticClass:"badge badge-danger mr-2"},[t._v("Inactive")]),t.terminal.is_on?a("span",{staticClass:"badge badge-success mr-2"},[t._v("Allumé")]):a("span",{staticClass:"badge badge-danger mr-2"},[t._v("Eteint")]),t.terminal.is_playing?a("span",{staticClass:"badge badge-success"},[t._v("En jeu")]):a("span",{staticClass:"badge badge-warning"},[t._v("En attente")])])])])]),a("div",{staticClass:"row my-2"},[a("div",{staticClass:"col"},[a("div",{staticClass:"card card-rounded px-4 py-3"},[a("div",{staticClass:"d-flex justify-content-around align-items-center"},t._l(t.campaigns,(function(e){return a("span",{key:e.id,staticClass:"border px-2 py-1 mx-1 rounded border-primary text-primary small d-flex flex-column align-items-center"},[a("img",{attrs:{src:e.logo,height:"50",alt:e.name}}),a("span",[t._v(t._s(e.name))])])})),0)])]),a("div",{staticClass:"col"},[a("div",{staticClass:"card card-rounded px-4 py-3"},[a("div",{staticClass:"d-flex justify-content-around align-items-center"},t._l(t.games,(function(e){return a("span",{key:e.id,staticClass:"border px-2 py-1 mx-1 rounded border-secondary text-secondary small d-flex flex-column align-items-center"},[a("img",{attrs:{src:e.logo,height:"50",alt:e.name}}),a("span",[t._v(t._s(e.name))])])})),0)])])]),a("div",{staticClass:"row mb-5"},[a("div",{staticClass:"col-7"},[a("div",{staticClass:" mt-4 px-4 py-2 card card-rounded"},[a("h5",{staticClass:"my-3"},[t._v("Derniers donateurs :")]),a("p",[t._v("Les 5 derniers donateurs sur ce terminal.")]),a("table",{staticClass:"table"},[t._m(1),a("tbody",t._l(t.donations,(function(e){return a("tr",{key:e.id},[a("td",{staticClass:"font-weight-bold"},[t._v(t._s(e.donator.id))]),a("td",[t._v(t._s(e.campaign.name))]),a("td",[t._v(t._s(e.amount)+" €")]),a("td",[t._v(t._s(e.game.name))])])})),0)])])]),a("div",{staticClass:"col-5 mt-4"},[a("div",{staticClass:"mb-3 px-4 py-2 pt-3 card card-rounded"},[a("h5",[t._v("Session moyenne :")]),a("p",{staticClass:"display-4"},[t._v(t._s(t.avgTS))])]),a("div",{staticClass:"mb-3 px-4 py-2 pt-3 card card-rounded"},[a("h5",[t._v("Session de jeu moyenne :")]),a("p",{staticClass:"display-4"},[t._v(t._s(t.avgGameTS))])]),a("div",{staticClass:"mb-3 px-4 py-2 pt-3 card card-rounded"},[a("h5",[t._v("Donation moyenne :")]),a("p",{staticClass:"display-4"},[t._v(t._s(t.avgDonations)+" €")])])])])])},re=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col"},[a("h4",{staticClass:"font-weight-bold"},[t._v("Dashboard")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",{staticClass:"thead-dark"},[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("ID")]),a("th",{attrs:{scope:"col"}},[t._v("Campagne")]),a("th",{attrs:{scope:"col"}},[t._v("Montant")]),a("th",{attrs:{scope:"col"}},[t._v("Jeu choisi")])])])}],oe=(a("5319"),{name:"Terminal",data:function(){return{terminal:"",campaigns:{},games:{},donations:{},avgDonations:"",avgTS:"",avgGameTS:""}},mounted:function(){this.getTerminal(),this.getStats()},methods:{getTerminal:function(){var t=this;this.$http.get("terminal/"+this.$route.params.id+"/").then((function(e){t.terminal=e.data,t.$http.get("terminal/"+t.$route.params.id+"/campaigns/").then((function(e){t.campaigns=e.data})),t.$http.get("terminal/"+t.$route.params.id+"/games/").then((function(e){t.games=e.data}))})).catch((function(t){console.log(t.response)}))},getStats:function(){var t=this;this.$http.get("terminal/"+this.$route.params.id+"/stats/").then((function(e){var a=JSON.parse(e.data);t.avgDonations=a.avg_amount.toFixed(2),t.donations=a.payments,t.avgGameTS=a.avg_game_ts.replace(/"/g,""),t.avgTS=a.avg_ts.replace(/"/g,"")})).catch((function(t){console.log(t.response)}))}}}),le=oe,ce=Object(u["a"])(le,ne,re,!1,null,null,null),me=ce.exports,ue=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"about mt-3"},[a("div",{staticClass:"col-8 offset-2 mb-4"},[a("div",{staticClass:"row"},[a("h1",{staticClass:"display-4 text-center"},[t._v("Terminal n° "+t._s(t.terminal.id))]),a("p",{staticClass:"lead"},[t._v(" Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. ")])])]),a("div",{staticClass:"col"},[a("EditSingleTerminal",{attrs:{terminal:t.terminal,campaigns:t.campaigns,games:t.games}})],1)])},de=[],pe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{staticClass:"w-100"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-9"},[a("div",{staticClass:"form-group w-100"},[a("label",{attrs:{for:"name"}},[t._v("Nom du terminal")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.terminal.name,expression:"terminal.name"}],staticClass:"form-control",attrs:{type:"text","aria-describedby":"nameHelp"},domProps:{value:t.terminal.name},on:{input:function(e){e.target.composing||t.$set(t.terminal,"name",e.target.value)}}}),a("small",{staticClass:"form-text text-muted",attrs:{id:"nameHelp"}},[t._v("Donnez un nom cohérent au terminal.")])])]),a("div",{staticClass:"col-3"},[a("div",{staticClass:"form-group w-100"},[a("label",{attrs:{for:"owner"}},[t._v("Propriétaire")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.terminal.owner,expression:"terminal.owner"}],staticClass:"form-control",attrs:{type:"text",disabled:"","aria-describedby":"ownerHelp"},domProps:{value:t.terminal.owner},on:{input:function(e){e.target.composing||t.$set(t.terminal,"owner",e.target.value)}}})])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"location"}},[t._v("Localisation")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.terminal.location,expression:"terminal.location"}],staticClass:"form-control",attrs:{type:"text","aria-describedby":"helpId",placeholder:"Adresse ou coordonnées de la borne"},domProps:{value:t.terminal.location},on:{input:function(e){e.target.composing||t.$set(t.terminal,"location",e.target.value)}}}),a("small",{staticClass:"form-text text-muted",attrs:{id:"helpId"}},[t._v("Localisation de la borne.")])])])]),a("div",{staticClass:"row"},[t.terminal.campaigns?a("div",{staticClass:"col"},[a("label",{attrs:{for:"campaign"}},[t._v("Campagnes actives : "),a("span",{class:[t.terminal.campaigns.length>t.maxCampaigns||0==t.terminal.campaigns.length?"text-danger":"","font-weight-bold"]},[t._v("("+t._s(t.terminal.campaigns.length)+"/"+t._s(t.maxCampaigns)+")")])]),a("div",{staticClass:"row form-group"},t._l(t.campaigns,(function(e){return a("label",{key:e.id,class:[t.campaignExists(e.id)?"checked":"","checkbox","col-3","py-2","mx-2"],attrs:{for:e.id},on:{click:function(a){return a.preventDefault(),t.selectCampaign(e.id)}}},[a("input",{attrs:{type:"radio"},domProps:{value:e.id}}),a("span",{class:["selected","d-flex","align-items-center","justify-content-center"]},[a("font-awesome-icon",{attrs:{icon:"check"}})],1),a("span",{staticClass:"checkbox-icon"},[a("img",{attrs:{src:e.logo,height:"70",alt:e.name}})]),a("h5",{staticClass:"mt-2"},[t._v(t._s(e.name))]),a("p",{staticClass:"lead"},[t._v(" "+t._s(e.collected)+"/"+t._s(e.goal_amount)+" € ")])])})),0)]):t._e()]),a("div",{staticClass:"row"},[t.terminal.games?a("div",{staticClass:"col"},[a("label",{attrs:{for:"game"}},[t._v("Jeux actifs : "),a("span",{class:[t.terminal.games.length>t.maxGames||0==t.terminal.games.length?"text-danger":"","font-weight-bold"]},[t._v("("+t._s(t.terminal.games.length)+"/"+t._s(t.maxGames)+")")])]),a("div",{staticClass:"row form-group"},t._l(t.games,(function(e){return a("label",{key:e.id,class:[t.gameExists(e.id)?"checked":"","checkbox","col-3","py-3","mx-2"],attrs:{for:e.id},on:{click:function(a){return a.preventDefault(),t.selectGame(e.id)}}},[a("input",{attrs:{type:"radio"},domProps:{value:e.id}}),a("span",{class:["selected","d-flex","align-items-center","justify-content-center"]},[a("font-awesome-icon",{attrs:{icon:"check"}})],1),a("span",{staticClass:"checkbox-icon"},[a("img",{attrs:{src:e.logo,height:"70",alt:e.name}})]),a("h4",{staticClass:"mt-2"},[t._v(t._s(e.name))])])})),0)]):t._e()]),a("div",{staticClass:"row my-3"},[a("div",{staticClass:"col text-center"},[a("router-link",{staticClass:"btn btn-link",attrs:{to:"/terminals"}},[t._v("Retour")]),a("button",{staticClass:"btn btn-primary",on:{click:function(e){return e.preventDefault(),t.edit(e)}}},[t._v(" Enregistrer les modifications ")])],1)])])},ve=[],ge=(a("caad"),a("2532"),{name:"EditTerminalForm",props:["terminal","campaigns","games"],data:function(){return{success:!1,errors:!1,maxGames:this.$store.state.maxGames,maxCampaigns:this.$store.state.maxCampaigns}},methods:{campaignExists:function(t){return this.terminal.campaigns.includes(t)},selectCampaign:function(t){if(this.terminal.campaigns.includes(t))for(var e=0;e<this.terminal.campaigns.length;e++){var a=this.terminal.campaigns[e];a==t&&this.$delete(this.terminal.campaigns,e)}else this.terminal.campaigns.length<=this.maxCampaigns&&this.terminal.campaigns.push(t)},gameExists:function(t){return this.terminal.games.includes(t)},selectGame:function(t){if(this.terminal.games.includes(t))for(var e=0;e<this.terminal.games.length;e++){var a=this.terminal.games[e];a==t&&this.$delete(this.terminal.games,e)}else this.terminal.games.length<=this.maxGames&&this.terminal.games.push(t)},edit:function(){var t=this;this.terminal&&(this.success=!1,this.errors=!1,this.$http.put("terminal/"+this.terminal.id+"/",this.terminal).then((function(e){t.success=!0,t.terminal=e.data})).catch((function(e){t.errors=!0,console.log(e.response)})))}}}),fe=ge,he=(a("7487"),Object(u["a"])(fe,pe,ve,!1,null,null,null)),Ce=he.exports,_e={name:"EditTerminal",components:{EditSingleTerminal:Ce},data:function(){return{terminal:"",campaigns:{},games:{}}},mounted:function(){this.getTerminal(),this.getCampaigns(),this.getGames()},methods:{getGames:function(){var t=this;this.$http.get("game/").then((function(e){t.games=e.data})).catch((function(t){console.log(t.response)}))},getCampaigns:function(){var t=this;this.$http.get("campaign/").then((function(e){t.campaigns=e.data})).catch((function(t){console.log(t.response)}))},getTerminal:function(){var t=this;this.$http.get("terminal/"+this.$route.params.id+"/").then((function(e){t.terminal=e.data})).catch((function(t){console.log(t.response)}))}}},be=_e,xe=Object(u["a"])(be,ue,de,!1,null,null,null),ye=xe.exports,we=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.formVisible?a("div",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-8 offset-2 mb-4"},[a("div",{staticClass:"row"},[a("a",{staticClass:"mb-2",attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.goBack(e)}}},[t._v("Retour au choix du client")])]),t._m(2)])]),a("div",{staticClass:"col-6 offset-3"},[a("div",{staticClass:"row"},[a("div",{staticClass:"mt-1"},[t.choosenCustomer?a("h4",[t._v("Choix du client")]):a("h4",[t._v("Nouveau client")]),a("p",{staticClass:"small"},[t._v("Le compte client lié au terminal.")])]),a("div",{staticClass:"form-group w-100"},[a("label",{attrs:{for:"name"}},[t._v("Nom de l'entreprise")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.customer.company,expression:"customer.company"}],staticClass:"form-control",attrs:{type:"text",disabled:""!=t.choosenCustomer},domProps:{value:t.customer.company},on:{input:function(e){e.target.composing||t.$set(t.customer,"company",e.target.value)}}})]),a("div",{staticClass:"form-group w-100"},[a("label",{attrs:{for:"name"}},[t._v("Contact au sein de l'entreprise")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.customer.representative,expression:"customer.representative"}],staticClass:"form-control",attrs:{type:"text",disabled:""!=t.choosenCustomer},domProps:{value:t.customer.representative},on:{input:function(e){e.target.composing||t.$set(t.customer,"representative",e.target.value)}}})]),a("div",{staticClass:"col pl-0"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"sales_type"}},[t._v("Type de vente")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.customer.sales_type,expression:"customer.sales_type"}],staticClass:"form-control",attrs:{disabled:""!=t.choosenCustomer},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.customer,"sales_type",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"A",checked:"A"==t.customer.sales_type}},[t._v("Achat")]),a("option",{attrs:{value:"L",checked:"L"==t.customer.sales_type}},[t._v("Location")])])])]),a("div",{staticClass:"col pr-0"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"sales_type"}},[t._v("Contrat de maintenance")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.customer.maintenance_type,expression:"customer.maintenance_type"}],staticClass:"form-control",attrs:{disabled:""!=t.choosenCustomer},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.customer,"maintenance_type",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"option1",checked:"option1"==t.customer.sales_type}},[t._v("Option 1")]),a("option",{attrs:{value:"option2",checked:"option2"==t.customer.sales_type}},[t._v("Option 2")])])])])]),a("hr"),a("div",{staticClass:"row"},[t._m(3),a("div",{staticClass:"form-group w-100"},[a("label",{attrs:{for:"name"}},[t._v("Nom d'utilisateur")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.username,expression:"user.username"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.user.username},on:{input:function(e){e.target.composing||t.$set(t.user,"username",e.target.value)}}})]),a("div",{staticClass:"form-group w-100"},[a("label",{attrs:{for:"name"}},[t._v("Mot de passe")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.password,expression:"user.password"}],staticClass:"form-control",attrs:{type:"password"},domProps:{value:t.user.password},on:{input:function(e){e.target.composing||t.$set(t.user,"password",e.target.value)}}})])]),a("hr"),a("div",{staticClass:"row"},[t._m(4),a("div",{staticClass:"form-group w-100"},[a("label",{attrs:{for:"name"}},[t._v("Nom du terminal")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.terminal.name,expression:"terminal.name"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.terminal.name},on:{input:function(e){e.target.composing||t.$set(t.terminal,"name",e.target.value)}}})]),a("div",{staticClass:"form-group w-100"},[a("label",{attrs:{for:"name"}},[t._v("Localisation du terminal")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.terminal.location,expression:"terminal.location"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.terminal.location},on:{input:function(e){e.target.composing||t.$set(t.terminal,"location",e.target.value)}}})])]),a("div",{staticClass:"row my-3 text-center"},[a("button",{staticClass:"btn btn-primary",on:{click:function(e){return e.preventDefault(),t.addTerminal(e)}}},[t._v(" Enregistrer ")])])])]):a("div",[t._m(0),a("div",{staticClass:"col-6 offset-3"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.choosenCustomer,expression:"choosenCustomer"}],staticClass:"custom-select mb-2",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.choosenCustomer=e.target.multiple?a:a[0]}}},t._l(t.customers,(function(e){return a("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.company)+" - "+t._s(e.representative))])})),0),a("button",{staticClass:"btn btn-primary w-100",on:{click:function(e){return e.preventDefault(),t.continueWithCustomer(e)}}},[t._v(" Choisir un client existant ")]),t._m(1),a("button",{staticClass:"btn btn-success w-100",on:{click:function(e){return e.preventDefault(),t.continueWithoutCustomer(e)}}},[t._v(" Créer un nouveau client ")])])])},$e=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-8 offset-2 mb-4"},[a("div",{staticClass:"row"},[a("h1",{staticClass:"display-4 text-center"},[t._v("Choisir un client")]),a("p",{staticClass:"lead"},[t._v(" Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. ")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hr-text my-4"},[a("span",{staticClass:"mx-3"},[t._v("ou")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("h1",{staticClass:"display-4 text-center"},[t._v("Nouveau terminal")]),a("p",{staticClass:"lead"},[t._v(" Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mt-3"},[a("h4",[t._v("Paramètres de connexion")]),a("p",{staticClass:"small"},[t._v(" Les identifiants que le client doit utiliser pour connecter son terminal. ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mt-1"},[a("h4",[t._v("Nom du terminal")]),a("p",{staticClass:"small"},[t._v("Un nom clair pour identifier le terminal.")])])}],ke={name:"AddTerminal",components:{},data:function(){return{formVisible:!1,choosenCustomer:"",customer:{},user:{},terminal:{},customers:{}}},mounted:function(){this.getCustomers()},methods:{addTerminal:function(){var t=this;""!=this.choosenCustomer&&this.customer.id?(this.user.customer=this.customer.id,this.$http.post("user/",this.user).then((function(e){t.user=e.data,t.terminal.owner=t.user.id,t.terminal.campaigns=[],t.terminal.games=[],t.$http.post("terminal/",t.terminal).then((function(e){t.terminal=e.data,t.$router.push({name:"edit-terminal",params:{id:t.terminal.id}})})).catch((function(t){console.log("Error in terminal post"),console.error(t.response)}))})).catch((function(t){console.log("Error in user post"),console.error(t.response)}))):this.customer&&this.user&&this.terminal&&this.$http.post("customer/",this.customer).then((function(e){t.customer=e.data,t.user.customer=t.customer.id,t.$http.post("user/",t.user).then((function(e){t.user=e.data,t.terminal.owner=t.user.id,t.terminal.campaigns=[],t.terminal.games=[],t.$http.post("terminal/",t.terminal).then((function(e){t.terminal=e.data,t.$router.push({name:"edit-terminal",params:{id:t.terminal.id}})})).catch((function(t){console.log("Error in terminal post"),console.error(t.response)}))})).catch((function(t){console.log("Error in user post"),console.error(t.response)}))})).catch((function(t){console.log("Error in Customer post"),console.error(t.response)}))},getCustomers:function(){var t=this;this.$http.get("customer/").then((function(e){t.customers=e.data})).catch((function(t){console.log(t.response)}))},continueWithCustomer:function(){var t=this;this.choosenCustomer&&this.$http.get("customer/"+this.choosenCustomer+"/").then((function(e){t.customer=e.data,t.formVisible=!0})).catch((function(t){console.log(t.response)}))},continueWithoutCustomer:function(){this.choosenCustomer="",this.customer={},this.formVisible=!0},goBack:function(){this.choosenCustomer="",this.customer={},this.formVisible=!1}}},Ae=ke,Ee=(a("01d5"),Object(u["a"])(Ae,we,$e,!1,null,null,null)),Te=Ee.exports,je=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"about"},[t._m(0),a("div",{staticClass:"col-8 offset-2 mt-4"},[a("div",{staticClass:"row mb-3 d-flex justify-content-end"},[a("router-link",{staticClass:"btn btn-primary d-flex align-items-center",attrs:{to:"/game/add"}},[a("font-awesome-icon",{staticClass:"mr-2",attrs:{icon:"plus"}}),a("span",[t._v("Nouveau jeu")])],1)],1),t._l(t.games,(function(e){return a("div",{key:e.id,staticClass:"row mb-3"},[a("div",{staticClass:"terminal card w-100"},[a("div",{staticClass:"terminal d-flex align-items-center justify-content-between"},[a("div",{staticClass:"d-flex align-items-center"},[a("div",{staticClass:" px-3"},[a("img",{attrs:{src:e.logo,width:"80",alt:e.name}})]),a("div",{staticClass:"py-2 px-3 d-flex flex-column"},[a("h3",{staticClass:"d-block mb-0"},[t._v(t._s(e.name))]),a("p",{staticClass:"mt-0 mb-2 small"},[a("strong",[t._v("Description:")]),t._v(" "+t._s(e.description)+" ")])])]),a("div",{staticClass:"links d-flex flex-column align-items-stretch bg-light align-self-stretch justify-content-around border-left"},[a("a",{staticClass:"px-3",attrs:{href:""},on:{click:function(a){return a.preventDefault(),t.editGame(e.id)}}},[t._v("Modifier")]),a("a",{staticClass:"px-3 text-danger",attrs:{href:""},on:{click:function(a){return a.preventDefault(),t.deleteGame(e.id)}}},[t._v("Supprimer")])])])])])}))],2)])},De=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-6 offset-3"},[a("div",{staticClass:"row"},[a("h1",{staticClass:"display-4 text-center"},[t._v("Gestion des jeux")]),a("p",{staticClass:"lead"},[t._v(" Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. ")])])])}],Le={name:"Games",data:function(){return{games:{}}},mounted:function(){this.getGames()},methods:{getGames:function(){var t=this;this.$http.get("game/").then((function(e){t.games=e.data}))},editGame:function(t){this.$router.push("/game/"+t+"/edit")}}},Se=Le,Ne=Object(u["a"])(Se,je,De,!1,null,null,null),Pe=Ne.exports,Ge=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"about mt-3"},[t._m(0),a("div",{staticClass:"col-8 offset-2"},[a("EditSingleGame",{attrs:{id:t.game_id}})],1)])},Oe=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-8 offset-2 mb-4"},[a("div",{staticClass:"row"},[a("h1",{staticClass:"display-4 text-center"},[t._v("Ajouter un jeu")]),a("p",{staticClass:"lead"},[t._v(" Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. ")])])])}],qe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{staticClass:"w-100"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"row"},[a("div",{staticClass:"card w-100 card-rounded mb-3"},[a("div",{staticClass:"card-body"},[a("div",{staticClass:"form-group d-flex flex-column align-items-center"},[a("img",{attrs:{src:t.game.logo,alt:t.game.name,height:"100"}}),a("input",{ref:"logo",staticClass:"form-control-file mt-5 my-3 text-center w-auto",attrs:{type:"file","aria-describedby":"fileHelpId"}}),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.editLogo(e)}}},[t._v(" Enregistrer ")])])])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"form-group w-100"},[a("label",{attrs:{for:"name"}},[t._v("Nom du jeu")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.game.name,expression:"game.name"}],staticClass:"form-control",attrs:{type:"text","aria-describedby":"nameHelp"},domProps:{value:t.game.name},on:{input:function(e){e.target.composing||t.$set(t.game,"name",e.target.value)}}}),a("small",{staticClass:"form-text text-muted",attrs:{id:"nameHelp"}},[t._v("Le nom affiché du jeu.")])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"form-group w-100"},[a("label",{attrs:{for:"name"}},[t._v("Path du jeu")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.game.path,expression:"game.path"}],staticClass:"form-control",attrs:{type:"text","aria-describedby":"nameHelp"},domProps:{value:t.game.path},on:{input:function(e){e.target.composing||t.$set(t.game,"path",e.target.value)}}}),a("small",{staticClass:"form-text text-muted",attrs:{id:"nameHelp"}},[t._v("Le chemin du fichier de lancement du jeu (en construction).")])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"form-group w-100"},[a("label",{attrs:{for:"name"}},[t._v("Description")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.game.description,expression:"game.description"}],staticClass:"form-control",attrs:{"aria-describedby":"nameHelp"},domProps:{value:t.game.description},on:{input:function(e){e.target.composing||t.$set(t.game,"description",e.target.value)}}}),a("small",{staticClass:"form-text text-muted",attrs:{id:"nameHelp"}},[t._v("Une courte description du jeu.")])])])])]),a("div",{staticClass:"row my-3"},[a("div",{staticClass:"col text-center"},[a("router-link",{staticClass:"btn btn-link",attrs:{to:"/games"}},[t._v("Retour")]),a("button",{staticClass:"btn btn-primary",on:{click:function(e){return e.preventDefault(),t.edit(e)}}},[t._v(" Enregistrer les modifications ")])],1)])])},He=[],Ie={name:"EditGameForm",props:["id"],data:function(){return{game:{}}},mounted:function(){var t=this;this.$http.get("game/"+this.id+"/").then((function(e){t.game=e.data}))},methods:{editLogo:function(){var t=this;if(this.game){var e=new FormData;e.append("logo",this.$refs.logo.files[0]),this.$http.patch("game/"+this.id+"/",e,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){t.game=e.data,t.$router.push("/games")}))}},edit:function(){var t=this;if(this.game){var e=new FormData;e.append("name",this.game.name),e.append("path",this.game.path),e.append("description",this.game.description),this.$http.patch("game/"+this.id+"/",e).then((function(e){t.game=e.data,t.$router.push("/games")}))}}}},Me=Ie,Fe=Object(u["a"])(Me,qe,He,!1,null,null,null),Re=Fe.exports,Be={name:"EditGame",components:{EditSingleGame:Re},data:function(){return{game_id:this.$route.params.id}}},ze=Be,Je=Object(u["a"])(ze,Ge,Oe,!1,null,null,null),Ue=Je.exports,Ve=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"about mt-3"},[t._m(0),a("div",{staticClass:"col-8 offset-2"},[a("AddSingleGame")],1)])},We=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-8 offset-2 mb-4"},[a("div",{staticClass:"row"},[a("h1",{staticClass:"display-4 text-center"},[t._v("Ajouter un jeu")]),a("p",{staticClass:"lead"},[t._v(" Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. ")])])])}],Qe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{staticClass:"w-100"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"row"},[a("div",{staticClass:"form-group w-100"},[a("label",{attrs:{for:"name"}},[t._v("Nom du jeu")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.game.name,expression:"game.name"}],staticClass:"form-control",attrs:{type:"text","aria-describedby":"nameHelp"},domProps:{value:t.game.name},on:{input:function(e){e.target.composing||t.$set(t.game,"name",e.target.value)}}}),a("small",{staticClass:"form-text text-muted",attrs:{id:"nameHelp"}},[t._v("Le nom affiché du jeu.")])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"form-group w-100"},[a("label",{attrs:{for:"name"}},[t._v("Path du jeu")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.game.path,expression:"game.path"}],staticClass:"form-control",attrs:{type:"text","aria-describedby":"nameHelp"},domProps:{value:t.game.path},on:{input:function(e){e.target.composing||t.$set(t.game,"path",e.target.value)}}}),a("small",{staticClass:"form-text text-muted",attrs:{id:"nameHelp"}},[t._v("Le chemin du fichier de lancement du jeu (en construction).")])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"form-group w-100"},[a("label",{attrs:{for:"name"}},[t._v("Description")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.game.description,expression:"game.description"}],staticClass:"form-control",attrs:{"aria-describedby":"nameHelp"},domProps:{value:t.game.description},on:{input:function(e){e.target.composing||t.$set(t.game,"description",e.target.value)}}}),a("small",{staticClass:"form-text text-muted",attrs:{id:"nameHelp"}},[t._v("Une courte description du jeu.")])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"form-group w-100"},[a("label",{attrs:{for:"logo"}},[t._v("Logo")]),a("input",{ref:"logo",staticClass:"form-control-file",attrs:{type:"file","aria-describedby":"fileHelpId"}}),a("small",{staticClass:"form-text text-muted",attrs:{id:"fileHelpId"}},[t._v("Un logo en PNG pour le jeu.")])])])])]),a("div",{staticClass:"row my-3"},[a("div",{staticClass:"col text-center"},[a("router-link",{staticClass:"btn btn-link",attrs:{to:"/games"}},[t._v("Retour")]),a("button",{staticClass:"btn btn-primary",on:{click:function(e){return e.preventDefault(),t.add(e)}}},[t._v(" Enregistrer les modifications ")])],1)])])},Ke=[],Xe={name:"AddGameForm",data:function(){return{game:{}}},methods:{add:function(){var t=this;if(this.game){var e=new FormData;e.append("name",this.game.name),e.append("path",this.game.path),e.append("description",this.game.description),e.append("logo",this.$refs.logo.files[0]),this.$http.post("game/",e,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){t.game=e.data,t.$router.push("/games")}))}}}},Ye=Xe,Ze=Object(u["a"])(Ye,Qe,Ke,!1,null,null,null),ta=Ze.exports,ea={name:"AddGame",components:{AddSingleGame:ta}},aa=ea,sa=Object(u["a"])(aa,Ve,We,!1,null,null,null),ia=sa.exports,na=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._m(0),t.error?a("div",{staticClass:"alert alert-danger"},[t._v(" "+t._s(t.error)+" ")]):t._e(),a("form",{staticClass:"col-6 offset-3"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("label",{attrs:{for:"firstName"}},[t._v("Username")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.credentials.username,expression:"credentials.username"}],staticClass:"form-control",attrs:{type:"text",required:""},domProps:{value:t.credentials.username},on:{input:function(e){e.target.composing||t.$set(t.credentials,"username",e.target.value)}}}),a("div",{staticClass:"invalid-feedback"},[t._v(" Valid first name is required. ")])])]),a("div",{staticClass:"row mt-2"},[a("div",{staticClass:"col"},[a("label",{attrs:{for:"firstName"}},[t._v("Password")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.credentials.password,expression:"credentials.password"}],staticClass:"form-control",attrs:{type:"password",required:""},domProps:{value:t.credentials.password},on:{input:function(e){e.target.composing||t.$set(t.credentials,"password",e.target.value)}}}),a("div",{staticClass:"invalid-feedback"},[t._v(" Password is invalid. ")])])]),a("div",{staticClass:"row my-3"},[a("div",{staticClass:"col text-center"},[a("button",{staticClass:"btn btn-primary btn-lg",on:{click:t.login}},[t._v(" Se connecter ")])])])])])},ra=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pricing-header px-3 py-3 pt-md-5 pb-md-4 mx-auto text-center"},[a("h1",{staticClass:"display-4"},[t._v("Connexion")]),a("p",{staticClass:"lead"},[t._v("Connectez vous à l'espace d'administration.")])])}],oa={name:"Auth",data:function(){return{credentials:{username:"",password:""},loading:!1,error:""}},methods:{login:function(){var t=this;this.loading=!0,this.$store.dispatch("login",this.credentials).then((function(){return t.$router.push("/")})).catch((function(e){t.loading=!1,t.error=e.response}))}}},la=oa,ca=Object(u["a"])(la,na,ra,!1,null,null,null),ma=ca.exports;s["a"].use(C["a"]);var ua=[{path:"/",name:"home",component:T},{path:"/campaigns",name:"campaings",component:M,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/campaign/add",name:"add-campaign",component:ft,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/campaign/:id",name:"campaign",component:U,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/campaign/:id/edit",name:"edit-campaign",component:it,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/customers",name:"customers",component:yt},{path:"/customer/:id/edit",name:"edit-customer",component:Ut,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/customer/add",name:"add-customer",component:Pt,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/games",name:"games",component:Pe},{path:"/game/:id/edit",name:"edit-game",component:Ue,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/game/add",name:"add-game",component:ia,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/login",name:"login",component:ma,meta:{requiresAnon:!0}},{path:"/terminals",name:"terminals",component:ie,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/terminal/add",name:"add-terminal",component:Te,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/terminal/:id",name:"terminal",component:me,meta:{requiresAuth:!0}},{path:"/terminal/:id/edit",name:"edit-terminal",component:ye,meta:{requiresAuth:!0}}],da=new C["a"]({routes:ua});da.beforeEach((function(t,e,a){if(t.matched.some((function(t){return t.meta.onlyFrom}))){if(e.name==t.meta.onlyFrom)return void a();a("/start")}else if(t.matched.some((function(t){return t.meta.requiresAdmin}))){if(y.getters.isAdmin)return void a();a("/")}else if(t.matched.some((function(t){return t.meta.requiresAuth}))){if(y.getters.isLoggedIn)return void a();a("/login")}else if(t.matched.some((function(t){return t.meta.requiresAnon}))){if(!y.getters.isLoggedIn)return void a();a("/")}else a()}));var pa=da,va=(a("4989"),a("ab8b"),a("6705"),a("2685")),ga=a.n(va),fa={error:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Erreur";return ga.a.error({title:e,message:t,position:"bottomCenter"})},success:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Succès";return ga.a.success({title:e,message:t,position:"bottomCenter"})}},ha=fa,Ca=a("ecee"),_a=a("c074"),ba=a("ad3d"),xa=a("26b9"),ya=a.n(xa);s["a"].use(ya.a,{color:"rgb(91, 184, 93)",failedColor:"red",height:"3px"}),Ca["c"].add(_a["h"],_a["d"],_a["g"],_a["f"],_a["a"],_a["c"],_a["b"],_a["e"],_a["i"]),s["a"].component("font-awesome-icon",ba["a"]),s["a"].config.productionTip=!1,s["a"].prototype.$http=x.a,s["a"].prototype.$http.defaults.baseURL="https://puls-preprod.herokuapp.com/";var wa=localStorage.getItem("token");wa&&(s["a"].prototype.$http.defaults.headers.common["Authorization"]=wa),s["a"].prototype.$http.interceptors.request.use((function(t){return s["a"].prototype.$Progress.start(),t}),(function(t){return s["a"].prototype.$Progress.fail(),Promise.reject(t)})),s["a"].prototype.$http.interceptors.response.use((function(t){return s["a"].prototype.$Progress.finish(),t.status&&201==t.status&&ha.success(t.statusText),200==t.status&&"post"==t.config.method&&ha.success(t.statusText),t}),(function(t){s["a"].prototype.$Progress.fail(),t.response&&t.response.data?t.response.data.non_field_errors?ha.error(t.response.statusText+" - "+t.response.data.non_field_errors):ha.error(t.response.statusText+" - "+t.response.data):ha.error(t)})),new s["a"]({router:pa,store:y,render:function(t){return t(h)}}).$mount("#app")},7487:function(t,e,a){"use strict";var s=a("8d29"),i=a.n(s);i.a},"755e":function(t,e,a){},"85ec":function(t,e,a){},"8d29":function(t,e,a){},f77e:function(t,e,a){"use strict";var s=a("755e"),i=a.n(s);i.a}});
//# sourceMappingURL=app.86cd7ea4.js.map